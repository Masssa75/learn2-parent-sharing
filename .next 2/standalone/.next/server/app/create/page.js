(()=>{var e={};e.id=323,e.ids=[323],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},2019:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(260),a=r(8203),o=r(5155),l=r.n(o),i=r(7292),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(t,n);let d=["",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,591)),"/Users/marcschwyn/Desktop/projects/Learn2/app/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9611)),"/Users/marcschwyn/Desktop/projects/Learn2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/marcschwyn/Desktop/projects/Learn2/app/create/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/create/page",pathname:"/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3610:(e,t,r)=>{Promise.resolve().then(r.bind(r,591))},3778:(e,t,r)=>{Promise.resolve().then(r.bind(r,8935))},6681:()=>{},8537:()=>{},8358:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},1918:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},8935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5512),a=r(8009),o=r(9334),l=r(6316);function i({url:e,onRemove:t}){let[r,o]=(0,a.useState)(null),[i,n]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),u=(0,l.Zb)(e);return i?(0,s.jsxs)("div",{className:"relative bg-dark-surface rounded-card p-4 animate-pulse",children:[(0,s.jsx)("div",{className:"w-full h-48 bg-dark-border rounded-input mb-3"}),(0,s.jsx)("div",{className:"h-4 bg-dark-border rounded w-3/4 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-dark-border rounded w-1/2"})]}):!d&&r&&u?(0,s.jsxs)("div",{className:"relative bg-dark-surface rounded-card overflow-hidden border border-dark-border",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:r.thumbnail_url||(0,l.I9)(u),alt:r.title,className:"w-full h-48 object-cover",onError:e=>{e.currentTarget.src=`https://img.youtube.com/vi/${u}/hqdefault.jpg`}}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M8 5v14l11-7z"})})})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-text-primary text-body font-semibold line-clamp-2 mb-1",children:r.title}),(0,s.jsx)("p",{className:"text-text-secondary text-meta",children:r.author_name})]}),t&&(0,s.jsx)("button",{onClick:t,className:"absolute top-2 right-2 w-8 h-8 bg-dark-bg/80 rounded-full flex items-center justify-center text-text-secondary hover:text-text-primary hover:bg-dark-bg transition-all",type:"button",children:(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}):null}let n=[{id:"apps",name:"Apps & Software",emoji:"\uD83D\uDCF1"},{id:"toys",name:"Toys & Games",emoji:"\uD83E\uDDF8"},{id:"books",name:"Books",emoji:"\uD83D\uDCDA"},{id:"activities",name:"Activities",emoji:"\uD83C\uDFA8"},{id:"education",name:"Educational Resources",emoji:"\uD83C\uDF93"},{id:"tips",name:"Parenting Tips",emoji:"\uD83D\uDCA1"}],d=["0-2","3-5","5-7","6-8","8+"];function c(){let e=(0,o.useRouter)(),[t,r]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[h,p]=(0,a.useState)([]),[b,g]=(0,a.useState)(""),[y,v]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),[w,k]=(0,a.useState)(""),[N,P]=(0,a.useState)(""),[C,S]=(0,a.useState)(!1),[M,_]=(0,a.useState)([]),[E,U]=(0,a.useState)(!1),[F,G]=(0,a.useState)(null),$=async e=>{let t=e.target.files?.[0];if(t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}if(t.size>5242880){alert("File size must be less than 5MB");return}S(!0);try{let e=new FormData;e.append("file",t);let r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to upload image")}let s=await r.json();P(s.url)}catch(e){console.error("Upload error:",e),alert("Failed to upload image. Please try again.")}finally{S(!1)}}},R=async()=>{if(!f){alert("Speech recognition is not supported in your browser. Please use Chrome, Edge, or Safari.");return}if(y)f.stop(),v(!1),k("");else try{await navigator.mediaDevices.getUserMedia({audio:!0}),k(""),f.start(),v(!0)}catch(e){console.error("Microphone access error:",e),alert("Microphone access is required for voice recording. Please allow microphone access and try again.")}},q=async r=>{r.preventDefault();try{let r=n.find(e=>e.id===x);if(!r)return;let s={title:t,description:c,category:r.name,ageRanges:h,linkUrl:b,imageUrl:N};console.log("Sending post data:",s);let a=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){let t=await a.json();if(401===a.status){e.push("/login");return}console.error("Error creating post:",t),console.error("Full error details:",JSON.stringify(t,null,2)),alert(`Failed to create post: ${t.error||"Unknown error"}${t.details?`

Details: ${t.details}`:""}${t.hint?`

Hint: ${t.hint}`:""}`);return}let o=await a.json();console.log("Post created successfully:",o),e.push("/")}catch(e){console.error("Error submitting post:",e),alert("Failed to create post. Please try again.")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-dark-bg",children:[(0,s.jsx)("div",{className:"sticky top-0 bg-dark-bg z-10 border-b border-dark-border",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-5 py-5",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-title text-text-primary",children:"Share what's working"}),(0,s.jsx)("button",{onClick:()=>e.back(),className:"text-text-muted hover:text-text-primary btn-transition",children:(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})})}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,s.jsxs)("form",{onSubmit:q,className:"p-5 space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-brand-yellow/20 to-brand-yellow/5 p-[2px] rounded-2xl",children:(0,s.jsx)("textarea",{value:c,onChange:e=>{u(e.target.value),e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px",_([]),G(null),r("")},placeholder:"Describe your tip or what you learned today...",rows:6,className:"w-full bg-black border-2 border-transparent rounded-2xl px-6 py-5 pr-16 text-text-primary text-xl placeholder-text-muted outline-none focus:border-brand-yellow/50 transition-all resize-y overflow-hidden shadow-xl",style:{minHeight:"180px"},required:!0})}),(0,s.jsx)("button",{type:"button",onClick:R,className:`absolute bottom-4 right-4 p-3 rounded-full transition-all ${y?"bg-red-500 hover:bg-red-600 animate-pulse shadow-lg":"bg-brand-yellow/20 hover:bg-brand-yellow/30 border border-brand-yellow/50"}`,title:y?"Stop recording":"Record your tip",children:y?(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"text-white",children:(0,s.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}):(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"text-brand-yellow",children:[(0,s.jsx)("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),(0,s.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,s.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),(0,s.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}),y&&w&&(0,s.jsx)("div",{className:"absolute bottom-16 right-4 bg-dark-surface px-3 py-1 rounded-card text-sm text-text-muted italic max-w-xs shadow-lg",children:w})]}),(0,s.jsx)("div",{children:0===M.length?(0,s.jsx)("button",{type:"button",onClick:async()=>{if(!c.trim()){alert("Please write a description first");return}U(!0);try{let e=await fetch("/api/ai/generate-titles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:c,linkUrl:b,category:n.find(e=>e.id===x)?.name})});if(!e.ok)throw Error("Failed to generate titles");let t=await e.json();_(t.titles)}catch(e){console.error("Error generating titles:",e),alert("Failed to generate titles. Please try again.")}finally{U(!1)}},disabled:!c.trim()||E,className:"w-full px-4 py-3 rounded-input font-medium text-body bg-dark-surface text-brand-yellow border border-brand-yellow hover:bg-brand-yellow hover:text-black btn-transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Generating titles..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,s.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,s.jsx)("path",{d:"M2 12l10 5 10-5"})]}),"Generate title for me"]})}):(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-text-secondary text-sm mb-2",children:"Select your favorite title:"}),M.map((e,t)=>(0,s.jsxs)("button",{type:"button",onClick:()=>{G(t),r(e)},className:`w-full text-left px-4 py-3 rounded-input border transition-all ${F===t?"border-brand-yellow bg-brand-yellow/10 text-text-primary":"border-dark-border bg-dark-surface text-text-secondary hover:border-text-muted hover:text-text-primary"}`,children:[(0,s.jsxs)("span",{className:"text-text-muted mr-2",children:[t+1,"."]}),e]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>{_([]),G(null),r("")},className:"text-text-muted hover:text-text-secondary text-sm underline",children:"Generate new titles"})]})}),(0,s.jsx)("div",{className:"relative",children:b&&(0,l.t$)(b)?(0,s.jsx)(i,{url:b,onRemove:()=>g("")}):(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted",children:[(0,s.jsx)("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),(0,s.jsx)("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),(0,s.jsx)("input",{type:"url",value:b,onChange:e=>g(e.target.value),placeholder:"Paste link to app, video, or website",className:"w-full bg-black border border-dark-border rounded-input pl-12 pr-4 py-3 text-text-primary text-body placeholder-text-muted outline-none focus:border-brand-yellow transition-colors"})]})}),(0,s.jsx)("div",{children:N?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:N,alt:"Post image",className:"w-full h-48 object-cover rounded-card mb-2"}),(0,s.jsx)("button",{type:"button",onClick:()=>{P("")},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 w-6 h-6 flex items-center justify-center text-xs",children:"\xd7"})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed border-dark-border rounded-card p-4 text-center",children:[(0,s.jsx)("input",{type:"file",id:"imageUploadCreate",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:$,className:"hidden",disabled:C}),(0,s.jsx)("label",{htmlFor:"imageUploadCreate",className:`cursor-pointer ${C?"opacity-50":""}`,children:C?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-brand-yellow"}),(0,s.jsx)("span",{className:"text-text-muted",children:"Uploading..."})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("span",{className:"text-text-muted text-sm",children:"Click to add image"}),(0,s.jsx)("span",{className:"text-text-muted text-xs",children:"JPEG, PNG, GIF, WebP up to 5MB"})]})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Category"}),(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"w-full bg-black border border-dark-border rounded-input px-4 py-3 text-text-primary text-body outline-none focus:border-brand-yellow transition-colors",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select category"}),n.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Age Range"}),(0,s.jsxs)("select",{value:h[0]||"",onChange:e=>p(e.target.value?[e.target.value]:[]),className:"w-full bg-black border border-dark-border rounded-input px-4 py-3 text-text-primary text-body outline-none focus:border-brand-yellow transition-colors",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select age"}),d.map(e=>(0,s.jsxs)("option",{value:e,children:["Ages ",e]},e))]})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 px-6 py-3.5 rounded-button font-semibold text-body bg-transparent text-text-primary border border-dark-border hover:bg-white/5 btn-transition",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:!t||!c||!x||0===h.length,className:"flex-1 px-6 py-3.5 rounded-button font-semibold text-body bg-brand-yellow text-black hover:bg-[#f5e147] hover:scale-[1.02] btn-transition disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:"Share"})]})]})})]})}},9334:(e,t,r)=>{"use strict";var s=r(8686);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6316:(e,t,r)=>{"use strict";function s(e){try{let t=new URL(e);if("www.youtube.com"===t.hostname||"youtube.com"===t.hostname){if("/watch"===t.pathname)return t.searchParams.get("v");if(t.pathname.startsWith("/embed/"))return t.pathname.split("/")[2]}if("youtu.be"===t.hostname)return t.pathname.slice(1);return null}catch{return null}}function a(e){return`https://img.youtube.com/vi/${e}/maxresdefault.jpg`}function o(e){return`https://www.youtube.com/embed/${e}`}function l(e){return null!==s(e)}r.d(t,{CZ:()=>o,I9:()=>a,Zb:()=>s,t$:()=>l})},591:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/marcschwyn/Desktop/projects/Learn2/app/create/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/marcschwyn/Desktop/projects/Learn2/app/create/page.tsx","default")},9611:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>l});var s=r(2740);r(2704);var a=r(9258),o=r.n(a);let l={title:"Learn2 - Parent Sharing Platform",description:"Discover and share apps, toys, books, and tips that work for your kids"};function i({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${o().className} bg-background text-white`,children:e})})}},2704:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,101],()=>r(2019));module.exports=s})();